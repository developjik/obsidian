**Zodios**ëŠ” **Zod**ì™€ **Axios**ë¥¼ ê²°í•©í•œ **íƒ€ì… ì•ˆì „í•œ API í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬**ì…ë‹ˆë‹¤.

**ì´ë¥¼ í†µí•´, ì»´íŒŒì¼ íƒ€ì„**ê³¼ **ëŸ°íƒ€ì„** ëª¨ë‘ì— íƒ€ì… ì•ˆì „ì„±ì„ ë³´ì¥í•˜ë©°, ê°œë°œìì—ê²Œ í¸ë¦¬í•œ API í†µì‹  í™˜ê²½ì„ ì œê³µí•©ë‹ˆë‹¤.

<aside> ğŸ’¡

- **Zod**: TypeScriptì—ì„œ ìŠ¤í‚¤ë§ˆ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, ëŸ°íƒ€ì„ì—ì„œ ë°ì´í„°ì˜ ìœ íš¨ì„±ì„ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **Axios**: ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” HTTP í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, ê°„í¸í•œ API ìš”ì²­ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤. </aside>

---

## **âœ¨ Zodiosì˜ ì£¼ìš” ê¸°ëŠ¥**

**1ï¸âƒ£Â íƒ€ì… ì•ˆì „ì„± ë³´ì¥**

ZodiosëŠ” **Zod**ë¥¼ ì‚¬ìš©í•´ API ìš”ì²­ê³¼ ì‘ë‹µì˜ ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ **TypeScript**ì˜ íƒ€ì… ì‹œìŠ¤í…œê³¼ **Zod**ì˜ ëŸ°íƒ€ì„ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ê²°í•©í•˜ì—¬, **ì»´íŒŒì¼ íƒ€ì„**ê³¼ **ëŸ°íƒ€ì„** ëª¨ë‘ì—ì„œ íƒ€ì… ì•ˆì „ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.

**2ï¸âƒ£Â ìë™ ì™„ì„±ê³¼ íƒ€ì… ì¶”ë¡ **

API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì •ì˜í•˜ë©´, ZodiosëŠ” ìë™ìœ¼ë¡œ ìš”ì²­ê³¼ ì‘ë‹µì˜ íƒ€ì…ì„ ì¶”ë¡ í•©ë‹ˆë‹¤. ì´ëŠ” ê°œë°œìê°€ APIë¥¼ ì‚¬ìš©í•  ë•Œ **ìë™ ì™„ì„±**ê³¼ **íƒ€ì… ì²´í¬**ë¥¼ í†µí•´ ì‹¤ìˆ˜ë¥¼ ì¤„ì´ê³  ìƒì‚°ì„±ì„ ë†’ì´ëŠ” ë° í° ë„ì›€ì„ ì¤ë‹ˆë‹¤.

**3ï¸âƒ£Â ê°„í¸í•œ API ì •ì˜**

ZodiosëŠ” ì§ê´€ì ì¸ ë°©ì‹ìœ¼ë¡œ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê° ì—”ë“œí¬ì¸íŠ¸ì˜ **URL**, **HTTP ë©”ì„œë“œ**, **ìš”ì²­ ë° ì‘ë‹µ ìŠ¤í‚¤ë§ˆ**ë¥¼ í•œ ê³³ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆì–´ ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì´ í–¥ìƒë©ë‹ˆë‹¤.

**4ï¸âƒ£Â Axiosì™€ì˜ ì™„ë²½í•œ í˜¸í™˜ì„±**

ZodiosëŠ” **Axios**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ê¸° ë•Œë¬¸ì—, Axiosì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. **ì¸í„°ì…‰í„°**, **ìš”ì²­ ì·¨ì†Œ**, **íƒ€ì„ì•„ì›ƒ ì„¤ì •** ë“± Axiosì˜ ê°•ë ¥í•œ ê¸°ëŠ¥ë“¤ì„ Zodiosì—ì„œë„ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## **ğŸ’¡ Zodiosì˜ ì¥ì **

![_- visual selection (14).svg](attachment:4df04095-b220-4da7-b42c-3b458dc3fda9:_-_visual_selection_(14).svg)

**1ï¸âƒ£Â íƒ€ì… ì•ˆì „ì„± ê°•í™”**

ZodiosëŠ” **Zod**ë¥¼ í†µí•´ ëŸ°íƒ€ì„ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì œê³µí•˜ë©°, TypeScriptì™€ì˜ í†µí•©ì„ í†µí•´ ì»´íŒŒì¼ íƒ€ì„ì—ë„ íƒ€ì… ì•ˆì „ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì˜ëª»ëœ ë°ì´í„° í˜•ì‹ìœ¼ë¡œ ì¸í•œ ë²„ê·¸ë¥¼ ì‚¬ì „ì— ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**2ï¸âƒ£ ê°œë°œ ìƒì‚°ì„± í–¥ìƒ**

ìë™ ì™„ì„±ê³¼ íƒ€ì… ì¶”ë¡ ì„ í†µí•´ ê°œë°œìëŠ” APIë¥¼ ì‚¬ìš©í•  ë•Œ ì‹¤ìˆ˜ë¥¼ ì¤„ì´ê³ , ë¹ ë¥´ê²Œ ê°œë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, API ì—”ë“œí¬ì¸íŠ¸ë¥¼ í•œ ê³³ì—ì„œ ê´€ë¦¬í•¨ìœ¼ë¡œì¨ ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì´ í–¥ìƒë©ë‹ˆë‹¤.

**3ï¸âƒ£ Axiosì˜ ê°•ë ¥í•œ ê¸°ëŠ¥ í™œìš©**

ZodiosëŠ” **Axios**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ê¸° ë•Œë¬¸ì—, Axiosì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ê¸°ì¡´ì— Axiosë¥¼ ì‚¬ìš©í•˜ë˜ ê°œë°œìë“¤ì—ê²Œ ì¹œìˆ™í•œ í™˜ê²½ì„ ì œê³µí•©ë‹ˆë‹¤.

---

## **ğŸ› ï¸ Zodios ì‚¬ìš©ë²•**

**1ï¸âƒ£ ì„¤ì¹˜**

```
npm install zodios zod axios
```

**2ï¸âƒ£ API ì •ì˜**

```
import { zodios } from "@zodios/core";
import { z } from "zod";

// Zod ìŠ¤í‚¤ë§ˆ ì •ì˜
const userSchema = z.object({
  id: z.number(),
  name: z.string(),
  email: z.string().email(),
});

// API ì—”ë“œí¬ì¸íŠ¸ ì •ì˜
const apiClient = zodios("<https://api.example.com>", [
  {
    method: "get",
    path: "/users/:id",
    response: userSchema,
  },
  {
    method: "post",
    path: "/users",
    parameters: [
      {
        name: "body",
        schema: userSchema.omit({ id: true }),
      },
    ],
    response: userSchema,
  },
]);
```

**3ï¸âƒ£ API ìš”ì²­**

```
// ì‚¬ìš©ì ì¡°íšŒ
const user = await apiClient.get("/users/:id", { params: { id: 1 } });
console.log(user);

// ì‚¬ìš©ì ìƒì„±
const newUser = await apiClient.post("/users", {
  name: "John Doe",
  email: "john@example.com",
});
console.log(newUser);
```

---

## zodios/react

**zodios/react**ëŠ” **tanstack-query**ë¥¼ ê°ì‹¸ëŠ” ê°•ë ¥í•œ ë˜í¼ë¡œ, íƒ€ì… ì•ˆì „ì„±ì´ ë³´ì¥ëœ API í˜¸ì¶œê³¼ ìë™ í‚¤ ê´€ë¦¬, ê·¸ë¦¬ê³  í–¥ìƒëœ TypeScript ì§€ì›ì„ ì œê³µí•©ë‹ˆë‹¤.

---

### zodios/react ì„¤ì •í•˜ê¸°

```tsx
import { Zodios } from "@zodios/core";
import { ZodiosHooks } from "@zodios/react";

const apiClient = new Zodios(baseUrl, [...]); // Zodios API í´ë¼ì´ì–¸íŠ¸
const apiHooks = new ZodiosHooks("myAPI", apiClient); //ZodiosHooks ì¸ìŠ¤í„´ìŠ¤
```

<aside> ğŸ’¡

**ZodiosHooks**ì˜ ì²« ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜("myAPI")ëŠ” **tanstack-query** í‚¤ì˜ ì ‘ë‘ì‚¬ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.

</aside>

---

## zodios/react í•µì‹¬ ê¸°ëŠ¥

### **1ï¸âƒ£Â Query** Hooks

- **Basic Query**

```tsx
const {
  data,
  isLoading,
  isError,
  invalidate,
  key
} = apiHooks.useQuery('/users');
```

- **Alias-based Query**

```tsx
// API ì„¤ì •ì— ì •ì˜ëœ ë³„ì¹­ ì‚¬ìš©
const { data: users } = apiHooks.useGetUsers();
```

- **Immutable Query (POST-based queries)**

```tsx
const { data } = apiHooks.useImmutableQuery('/users/search', {
  name: "John"
});
```

### 2ï¸âƒ£ **Mutation** Hooks

- **Basic Mutation**

```tsx
const { mutate } = apiHooks.useMutation('post', '/users');
```

- **Method-Specific Hooks**

```tsx
// POST
const { mutate: createUser } = apiHooks.usePost("/users");

// PUT
const { mutate: updateUser } = apiHooks.usePut("/users/:id");

// PATCH
const { mutate: patchUser } = apiHooks.usePatch("/users/:id");

// DELETE
const { mutate: deleteUser } = apiHooks.useDelete("/users/:id");
```

### **3ï¸âƒ£Â Infinite Queries**

```tsx
const {
  data: userPages,
  isFetching,
  fetchNextPage
} = apiHooks.useInfiniteQuery(
  "/users",
  {
    queries: { limit: 10 }
  },
  {
    getPageParamList: () => ["page"],
    getNextPageParam: (lastPage, pages) => lastPage.nextPage
      ? {
          queries: {
            page: lastPage.nextPage,
          },
        }
      : undefined
  }
);
```

### 4ï¸âƒ£Â **Cache Management**

- **Key Generation**

```tsx
// íŠ¹ì • ì—”ë“œí¬ì¸íŠ¸ì˜ í‚¤ ê°€ì ¸ì˜¤ê¸°
const key = apiHooks.getKeyByPath('get', '/users/:id', {
  params: { id: 1 }
});

// ë³„ì¹­ìœ¼ë¡œ í‚¤ ê°€ì ¸ì˜¤ê¸°
const key = apiHooks.getKeyByAlias('getUser', {
  params: { id: 1 }
});
```

- **Cache Invalidation**

```tsx
// invalidate í—¬í¼ ì‚¬ìš©
const { invalidate } = apiHooks.useQuery('/users');
invalidate();

// React Query í´ë¼ì´ì–¸íŠ¸ ì‚¬ìš©
const key = apiHooks.getKeyByPath('get', '/users/:id');
queryClient.invalidateQueries(key);
```

---

## â­ï¸ Hooks.use[Alias]

Zodiosì—ì„œëŠ” ì—”ë“œí¬ì¸íŠ¸ë¥¼ í˜¸ì¶œí•  ë•Œ aliasë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤. API ì •ì˜ ì—”ë“œí¬ì¸íŠ¸ì˜ `alias` ì˜µì…˜ì—ì„œ ì´ë¥¼ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Query Alias

Query alias hooksëŠ” react-queryì˜ `QueryResult` ê°ì²´ë¥¼ ë°˜í™˜í•˜ë©°, ë‹¤ìŒ í•­ëª©ë“¤ì„ í¬í•¨í•©ë‹ˆë‹¤:

- ì‘ë‹µ ë°ì´í„°ì™€ ëª¨ë“  react-query ê²°ê³¼ ì†ì„±ë“¤
- ìë™ ìƒì„±ëœ `key`
- `invalidate` í—¬í¼ í•¨ìˆ˜

### Basic Query Alias

```tsx
function use[Alias](
  config?: ZodiosRequestOptions,
  queryOptions: QueryOptions
): QueryResult<Response>;

// ì‚¬ìš© ì˜ˆì‹œ
const {
  data: users,
  isLoading,
  isError,
  invalidate,
  key
} = hooks.useGetUsers();
// ìœ„ ì½”ë“œëŠ” hooks.useQuery("/users")ì™€ ë™ì¼
```

### Immutable Query Alias

immutable ì¿¼ë¦¬ëŠ” POST ìš”ì²­ì— ëŒ€í•œ íŠ¹ë³„í•œ í˜•íƒœì˜ aliasì…ë‹ˆë‹¤.

```tsx
function use[Alias](
  body: Body,
  config?: ZodiosRequestOptions,
  queryOptions: QueryOptions
): QueryResult<Response>;

// ì‚¬ìš© ì˜ˆì‹œ
const {
  data: users,
  isLoading,
  isError
} = hooks.useSearchUsers({ name: "John" });
// ìœ„ ì½”ë“œëŠ” hooks.useImmutableQuery("/users/search")ì™€ ë™ì¼
```

> ì£¼ì˜ì‚¬í•­: Immutable query aliasëŠ” post ì—”ë“œí¬ì¸íŠ¸ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. API ì •ì˜ ì—”ë“œí¬ì¸íŠ¸ì—ì„œ immutable ì˜µì…˜ì„ trueë¡œ ì„¤ì •í•´ì•¼ useImmutableQuery í›…ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Mutation Alias

Mutation aliasëŠ” `post`, `put`, `patch`, `delete` ì—”ë“œí¬ì¸íŠ¸ì— ì‚¬ìš©ë©ë‹ˆë‹¤.

```tsx
function use[Alias](
  config?: ZodiosRequestOptions,
  queryOptions?: QueryOptions
): MutationResult<Response>;

// ì‚¬ìš© ì˜ˆì‹œ
const { mutate } = hooks.useCreateUser();
// ìœ„ ì½”ë“œëŠ” usePost("/users") ë˜ëŠ” useMutation("post","/users")ì™€ ë™ì¼

```

## ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ

### 1ï¸âƒ£Â GET ìš”ì²­ Alias

```tsx
// API ì •ì˜
const endpoints = [{
  method: "get",
  path: "/users",
  alias: "getUsers",
  response: z.array(UserSchema)
}];

// ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©
function UserList() {
  const {
    data: users,
    isLoading,
    invalidate
  } = hooks.useGetUsers();

  if (isLoading) return <div>ë¡œë”© ì¤‘...</div>;

  return (
    <div>
      <button onClick={invalidate}>ìƒˆë¡œê³ ì¹¨</button>
      {users.map(user => (
        <div key={user.id}>{user.name}</div>
      ))}
    </div>
  );
}
```

### 2ï¸âƒ£ Immutable POST ìš”ì²­ Alias

```tsx
// API ì •ì˜
const endpoints = [{
  method: "post",
  path: "/users/search",
  alias: "searchUsers",
  immutable: true,
  parameters: [{
    name: "searchParams",
    type: "Body",
    schema: z.object({
      name: z.string()
    })
  }],
  response: z.array(UserSchema)
}];

// ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©
function SearchUsers() {
  const {
    data: users,
    isLoading
  } = hooks.useSearchUsers({
    name: "John"
  });

  if (isLoading) return <div>ê²€ìƒ‰ ì¤‘...</div>;

  return (
    <div>
      {users.map(user => (
        <div key={user.id}>{user.name}</div>
      ))}
    </div>
  );
}
```

### 3ï¸âƒ£ Mutation Alias

```tsx
// API ì •ì˜
const endpoints = [{
  method: "post",
  path: "/users",
  alias: "createUser",
  parameters: [{
    name: "user",
    type: "Body",
    schema: UserSchema
  }],
  response: UserSchema
}];

// ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©
function CreateUser() {
  const { mutate, isLoading } = hooks.useCreateUser();

  const handleSubmit = (userData) => {
    mutate(userData, {
      onSuccess: () => {
        console.log('ì‚¬ìš©ì ìƒì„± ì„±ê³µ');
      }
    });
  };

  return (
    <form onSubmit={handleSubmit}>
      {/* í¼ ë‚´ìš© */}
    </form>
  );
}
```
