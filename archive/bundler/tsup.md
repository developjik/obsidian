### tsup이란?

`tsup`은 `TypeScript`와 `JavaScript` 프로젝트에서 사용 가능한 고성능 `Bundler`입니다. `Esbuild`를 기반으로 하여 **빠른 번들링 성능을 제공**하며, **설정이 거의 필요 없을 정도로 간편하게 사용**할 수 있습니다. `tsup`의 주된 목표는 개발자가 복잡한 설정 파일을 작성하지 않고도 프로젝트를 번들링할 수 있게 하는 것입니다. 즉, **제로 설정**(zero-config)으로 바로 시작할 수 있다는 것이 큰 장점입니다.

---
### 특징

1. **빠른 번들링 속도**  
   `tsup`은 내부적으로 `esbuild`를 사용하여, 매우 빠르게 코드를 번들링합니다. 이 덕분에 대규모 `TypeScript` 프로젝트에서도 높은 성능을 유지할 수 있습니다.

2. **제로 설정**  
   기본 설정이 매우 잘 되어 있어, 추가 설정 없이 바로 사용이 가능합니다. 물론, 필요에 따라 사용자 정의 설정도 가능합니다.

3. **Tree-shaking 지원**  
   불필요한 코드를 제거하는 `Tree-shaking` 기능을 기본 제공하여, 번들 크기를 최소화합니다.

4. **다양한 출력 형식 지원**  
   `ESM`, `CommonJS`, `UMD` 등 다양한 모듈 형식을 지원하여, 여러 환경에서의 사용이 가능합니다.

5. **TypeScript 지원**  
	`TypeScript`와 매우 잘 통합되어 있습니다. `TypeScript`로 작성된 코드를 쉽게 번들링하고, 타입 선언 파일(`.d.ts`)도 함께 생성할 수 있습니다.

6. **Watch 모드**  
   개발 중인 코드를 실시간으로 감시하여 자동으로 빌드해주는 `Watch 모드`를 지원합니다. 이를 통해 빠른 피드백을 얻을 수 있습니다.

7. **Minify 옵션**  
   코드 압축(minification)을 기본적으로 지원하여, 프로덕션 환경에서 사용할 수 있도록 최적화된 번들을 생성할 수 있습니다.

---
### tsup을 사용하는 이유

1. **설정의 단순함**
	`Webpack`이나 `Rollup` 같은 `Bundler`들은 매우 강력하지만, 설정이 복잡할 수 있습니다. 특히 초보 개발자나 간단한 프로젝트를 빠르게 시작하고자 하는 경우, 복잡한 설정 파일을 작성하는 데 많은 시간을 소비할 수 있습니다. `tsup`은 이러한 부담을 덜어주며, 기본적인 설정만으로도 충분히 번들링 작업을 수행할 수 있습니다.

2. **빠른 빌드 속도**
	프로젝트 규모가 커질수록 빌드 속도는 중요한 요소로 작용합니다. `tsup`은 `esbuild`를 기반으로 하고 있기 때문에, 기존 `Bundler`들에 비해 훨씬 빠른 속도를 자랑합니다. 특히 개발 중 빌드 속도가 느리면 생산성이 크게 떨어질 수 있는데, `tsup`은 이런 문제를 효과적으로 해결해줍니다.

3. **TypeScript와의 완벽한 호환성**
	`tsup`은 `TypeScript`로 작성된 프로젝트에 최적화되어 있습니다. `TypeScript` 프로젝트에서 타입 정의 파일(`.d.ts`)을 자동으로 생성하고, 이를 번들링 과정에서 자동으로 포함할 수 있어 별도의 설정 없이도 타입 선언을 배포할 수 있습니다.

4.  **다양한 모듈 형식 지원**
	`CommonJS`, `ESM`, `UMD` 같은 다양한 모듈 시스템을 지원하므로, 하나의 프로젝트에서 여러 환경에 맞는 빌드를 손쉽게 생성할 수 있습니다. 이를 통해 `Node.js`, `브라우저`, 그리고 다양한 타겟 환경에 맞는 번들을 만들 수 있습니다.

---
### tsup 사용 방법

1. **설치**

```bash
npm install tsup --save-dev
# 또는
yarn add tsup --dev
```

2. **기본 사용법**
설치가 완료되면, `package.json` 파일의 `scripts` 항목에 다음과 같이 `tsup` 명령어를 추가할 수 있습니다.

```json
{
  "scripts": {
    "build": "tsup"
  }
}
```

기본적으로 `src/index.ts` 파일을 엔트리로 삼아 번들링을 수행합니다. 따로 설정을 하지 않아도 `tsup`이 자동으로 프로젝트의 파일 구조를 분석해 번들을 생성합니다.

3. **사용자 정의 옵션**
물론, 프로젝트에 따라 추가적인 옵션을 설정할 수도 있습니다. `tsup.config.ts` 파일을 생성하여 다양한 옵션을 정의할 수 있습니다.

```typescript
import { defineConfig } from 'tsup'

export default defineConfig({
  entry: ['src/index.ts'],
  format: ['esm', 'cjs'], // ESM과 CJS 형식으로 번들 생성
  minify: true,           // 코드 압축
  dts: true,              // 타입 정의 파일 생성
  sourcemap: true         // 소스맵 생성
})
```

위 설정은 `src/index.ts`를 엔트리 파일로 지정하고, `ESM`과 `CommonJS` 형식으로 번들을 생성하며, 코드 압축과 타입 선언 파일, 그리고 소스맵을 함께 생성하도록 합니다.

4. **Watch 모드**
개발 중인 코드를 실시간으로 번들링하고 싶다면 `--watch` 옵션을 사용할 수 있습니다.

```bash
npm run build --watch
```

이 명령어를 실행하면 파일 변경 시마다 자동으로 빌드가 실행되며, 빠른 피드백을 받을 수 있습니다.
